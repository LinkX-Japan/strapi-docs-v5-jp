---
sidebar_position: 2
tags:
- Emailプラグイン
- パスワード
- プロバイダー
- ユーザー、ロール、権限
---

import NotV5 from '/docs/snippets/_not-updated-to-v5.md'

# ユーザー＆権限プラグインの設定

*ユーザー＆権限プラグイン* の設定は、管理パネルのメインナビゲーションにある![設定アイコン](/img/assets/icons/v5/Cog.svg) *設定* からアクセスできる*ユーザー＆権限プラグイン* の設定セクションで管理されます。この設定セクションでは、使用可能なプロバイダー、メールテンプレート、およびプラグインの高度な設定を構成できます。また、エンドユーザーのロールとそれに関連する権限を定義することもできます（[エンドユーザーロールの設定](../users-roles-permissions/configuring-end-users-roles.md)を参照）。

## プロバイダーの設定

ユーザー＆権限プラグインを使用すると、エンドユーザーがサードパーティプロバイダーを介してログインし、StrapiアプリケーションAPIを通じてフロントエンドアプリケーションのコンテンツにアクセスできるように、プロバイダーを有効化および構成できます。デフォルトでは、いくつかのプロバイダーが利用可能であり、そのうち「Email」は、ユーザー＆権限プラグインがインストールされたすべてのStrapiアプリケーションでデフォルトで有効になっています。

<ThemedImage
  alt="プロバイダー設定画面"
  sources={{
    light: '/img/assets/settings/up_providers.png',
    dark: '/img/assets/settings/up_providers_DARK.png',
  }}
/>

プロバイダーを有効化および設定するには：

1. 設定画面の *ユーザー＆権限プラグイン > プロバイダー* サブセクションに移動します。
2. 有効化および設定したいプロバイダーの編集 ![編集アイコン](/img/assets/icons/v5/Pencil.svg) ボタンをクリックします。
3. プロバイダー編集ウィンドウで、*有効化* オプションの **TRUE** ボタンをクリックします。
4. プロバイダーの設定を入力します。各プロバイダーには固有の設定項目があり、詳細は[開発者ドキュメント](/dev-docs/plugins/users-permissions#setting-up-the-provider---examples)をご覧ください。
5. **保存** ボタンをクリックします。

:::note
Strapiでデフォルトで提案されていない他のプロバイダーは、Strapiアプリケーションのコードを通じて手動で追加することができます（[開発者ドキュメント](/dev-docs/providers)を参照）。
:::

## メールテンプレートの設定

ユーザー＆権限プラグインでは、エンドユーザーに送信される2つのメールテンプレート「メールアドレス確認」と「パスワードリセット」が使用されます：

- アカウントが有効化されるために確認が必要な場合、
- Strapiアカウントのパスワードをリセットする必要がある場合。

<ThemedImage
  alt="メールテンプレート設定画面"
  sources={{
    light: '/img/assets/settings/up_email-templates.png',
    dark: '/img/assets/settings/up_email-templates_DARK.png',
  }}
/>

メールテンプレートを設定および編集するには：

1. 設定画面の *ユーザー＆権限プラグイン > メールテンプレート* サブセクションに移動します。
2. 設定および編集したいメールテンプレートの編集 ![編集アイコン](/img/assets/icons/v5/Pencil.svg) ボタンをクリックします。
3. メールテンプレートを設定します：

| 設定項目         | 手順                                                         |
| --------------  | ------------------------------------------------------------ |
| 送信者名        | メールの送信者の名前を指定します。                              |
| 送信者メール    | メールの送信者のメールアドレスを指定します。                     |
| 返信先メール    | （任意）エンドユーザーからの返信メールが送られるメールアドレスを指定します。 |
| 件名            | メールの件名を入力します。変数を使用することも可能です（[開発者ドキュメント](https://strapi.io/documentation/developer-docs/latest/development/plugins/users-permissions.html#templating-emails)を参照）。 |

4. 「メッセージ」テキストボックスでメールの内容を編集します。メールテンプレートの内容はHTML形式で、変数を使用します（[開発者ドキュメント](https://docs.strapi.io/developer-docs/latest/plugins/users-permissions.html#templating-emails)を参照）。
5. **完了** ボタンをクリックします。

## 高度な設定の構成

ユーザー＆権限プラグインに関連するすべての設定は *高度な設定* サブセクションから管理されます。これには、エンドユーザーのデフォルトロールの選択、サインアップの有効化、メール確認の有効化、パスワードリセット用のランディングページの選択が含まれます。

<ThemedImage
  alt="高度な設定画面"
  sources={{
    light: '/img/assets/settings/up_settings.png',
    dark: '/img/assets/settings/up_settings_DARK.png',
  }}
/>

1. 設定画面の *ユーザー＆権限プラグイン > 高度な設定* サブセクションに移動します。
2. 設定を構成します：

| 設定項目                     | 手順                                                                                                                     |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------------------ |
| 認証済みユーザーのデフォルトロール | ドロップダウンリストをクリックして、新しいエンドユーザーのデフォルトロールを選択します。                                                   |
| メールアドレスごとのアカウント数 | **TRUE** ボタンをクリックして、同じメールアドレスで作成できるエンドユーザーアカウントの数を1つに制限します。**FALSE** をクリックして、この制限を無効化し、複数のエンドユーザーアカウントに同じメールアドレス（例：`kai.doe@strapi.io`）を使用できるようにします。 |
| サインアップの有効化             | **TRUE** ボタンをクリックしてエンドユーザーのサインアップを有効化します。**FALSE** をクリックしてフロントエンドアプリケーションへのエンドユーザー登録を無効化します。 |
| パスワードリセットページのURL       | フロントエンドアプリケーションのパスワードリセットページのURLを指定します。                                                                             |
| メール確認の有効化               | **TRUE** ボタンをクリックして、確認メールを送信してエンドユーザーのアカウント確認を有効化します。**FALSE** をクリックしてアカウント確認を無効化します。      |
| リダイレクトURL                | エンドユーザーがStrapiアカウントを確認した後にリダイレクトされるページのURLを指定します。                                                                    |

3. **保存** ボタンをクリックします。
