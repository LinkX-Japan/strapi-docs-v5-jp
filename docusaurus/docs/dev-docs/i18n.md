---
title: 国際化（i18n）
displayed_sidebar: devDocsSidebar
toc_max_heading_level: 4
description: Strapi Content APIを国際化（i18n）オプションプラグインとともに使用する方法についての説明
tags:
- コレクションタイプ
- documentId
- ロケール
- GraphQL API
- 国際化（i18n）
- REST API
- シングルタイプ
---


# 🌍 国際化（i18n）

国際化（i18n）機能は、Strapiユーザーが「ロケール」と呼ばれる異なる言語でローカライズされたコンテンツを作成、管理、配布することを可能にします。国際化の概念についての詳細は、[W3Cの定義](https://www.w3.org/International/questions/qa-i18n.en#i18n)を参照してください。

i18n機能は次のような特長を持っています：

- 管理パネルのユーザーが自分のコンテンツの複数のローカライズ版を作成することを可能にします（[ユーザーガイド](/user-docs/content-manager/translating-content)を参照）
- 開発者が視聴者の国/言語に応じて適切なコンテンツを取得し、使用するローカライズプロジェクトを構築することを可能にします。

:::info
i18n機能はユーザーのコンテンツを自動的に翻訳したり、管理インターフェースを言語の特性に合わせて調整したりすることはありません（例えば、管理パネルを右から左へのフォーマットで表示するなど）。
:::

:::note メモ
* Strapi 5では、i18nはプラグインではなくなり、デフォルトでインストールされます。それでも[コンテンツタイプで有効/無効にする](/user-docs/content-type-builder/creating-new-content-type#creating-a-new-content-type)、またはi18nが有効化されたコンテンツタイプ内の[フィールドレベルで有効/無効にする](/user-docs/content-type-builder/configuring-fields-content-type)ことを選択することができます。
* i18nがStrapiのコアの一部となったため、これはContent Managerに送信される一部のパラメーターに影響を及ぼす可能性があります（[関連する破壊的変更のエントリー](/dev-docs/migration/v4-to-v5/breaking-changes/i18n-content-manager-locale)を参照）。
:::

## デフォルトロケールの設定

`STRAPI_PLUGIN_I18N_INIT_LOCALE_CODE` [環境変数](/dev-docs/configurations/environment#strapi-s-environment-variables)を設定して、環境のデフォルトロケールを設定することができます。この変数に使用する値はISO国コードであるべきです（[利用可能なロケールの完全なリスト](https://github.com/strapi/strapi/blob/v4.0.0/packages/plugins/i18n/server/constants/iso-locales.json)を参照）。
<!-- TODO v5: the link might change once v5 is out, don't forget to update it -->

これは、Strapiアプリケーションが本番環境にデプロイされ、初めてコンテンツタイプにi18n機能がインストールされ、有効化されたときに有用です。新規のi18nインストールでは、`en`がデフォルトのロケールとして設定されます。データベースにロケールが含まれておらず、環境に`STRAPI_PLUGIN_I18N_INIT_LOCALE_CODE`が設定されていない場合、ローカライゼーションが有効になっているコンテンツタイプのすべてのドキュメントは自動的に`en`ロケールに移行されます。

## REST APIで`locale`を使用する {#rest}

国際化（i18n）機能は、[REST API](/dev-docs/api/rest)に新たな機能を追加します。

:::事前条件
ロケールのAPIコンテンツを操作するには、そのロケールがすでに[Strapiの管理パネルに追加されている](/user-docs/settings/internationalization)ことを確認してください。
:::

`locale` [APIパラメータ](/dev-docs/api/rest/parameters)は、指定したロケールのみのドキュメントを操作するために使用できます。`locale`はロケールコードを値として取ります（[利用可能なロケールの全リスト](https://github.com/strapi/strapi/blob/v4.0.0/packages/plugins/i18n/server/constants/iso-locales.json)を参照）。

:::tip
`locale`パラメータが定義されていない場合、デフォルトのロケールに設定されます。新しいStrapiプロジェクトが作成されたときのデフォルトのロケールは`en`ですが、管理パネルで[デフォルトのロケールを設定](/user-docs/settings/internationalization)することもできます。

例えば、デフォルトでは、`/api/restaurants`へのGETリクエストは`/api/restaurants?locale=en`へのリクエストと同じレスポンスを返します。
:::

次の表は、REST APIにi18nによって追加された新しい使用ケースをリストし、構文例を示しています（リクエストをクリックすると、詳細を含む対応するセクションにジャンプします）：

<Tabs groupId="collection-single">

<TabItem value="collection" label="コレクションタイプの場合">

| 使用ケース | 構文例<br/>および詳細リンク |
|---------|-------|
| 特定のロケールのすべてのドキュメントを取得する | [`GET /api/restaurants?locale=fr`](#get-all-documents-in-a-specific-locale) |
| ドキュメントの特定のロケールバージョンを取得する | [`GET /api/restaurants/abcdefghijklmno456?locale=fr`](#get-one-collection-type) |
| デフォルトのロケールで新しいドキュメントを作成する | [`POST /api/restaurants`](#create-default-locale)<br/>+ リクエスト本文で属性を渡す |
| 特定のロケールで新しいドキュメントを作成する | [`POST /api/restaurants`](#create-specific-locale)<br/>+ リクエスト本文で属性**およびロケール**を渡す |
| 既存のドキュメントの新しいロケールバージョンを作成する、または既存のロケールバージョンを更新する | [`PUT /api/restaurants/abcdefghijklmno456?locale=fr`](#create-collection-type)<br/>+ リクエスト本文で属性を渡す |
| ドキュメントの特定のロケールバージョンを削除する | [`DELETE /api/restaurants/abcdefghijklmno456?locale=fr`](#delete-locale-collection-type) |

</TabItem>

<TabItem value="single" label="シングルタイプの場合">

| 使用ケース | 構文例<br/>および詳細リンク |
|----------------------------------------------|--------------------------------------------------|
| ドキュメントの特定のロケールバージョンを取得する | [`GET /api/homepage?locale=fr`](#get-one-single-type)  |
| 既存のドキュメントの新しいロケールバージョンを作成する、または既存のロケールバージョンを更新する | [`PUT /api/homepage?locale=fr`](#create-single-type)<br/>+ リクエスト本文で属性を渡す |
| ドキュメントの特定のロケールバージョンを削除する | [`DELETE /api/homepage?locale=fr`](#delete-locale-single-type) |

</TabItem>
</Tabs>

### 特定のロケールのすべてのドキュメントを取得する {#rest-get-all}

<!-- ? locale=allはもう使えないんですよね？ -->
<!-- `all`をロケールコードの値として使用し、`http://localhost:1337/api/restaurants?locale=all`のように記述することで、管理パネルで設定されているすべてのロケールのエントリを取得できます。 -->

<ApiCall>

<Request> 

`GET http://localhost:1337/api/restaurants?locale=fr`

</Request>

<Response> 

```json
{
  "data": [
    {
      "id": 5,
      "documentId": "h90lgohlzfpjf3bvan72mzll",
      "Title": "Meilleures pizzas",
      "Body": [
        {
          "type": "paragraph",
          "children": [
            {
              "type": "text",
              "text": "On déguste les meilleures pizzas de la ville à la Pizzeria Arrivederci."
            }
          ]
        }
      ],
      "createdAt": "2024-03-06T22:08:59.643Z",
      "updatedAt": "2024-03-06T22:10:21.127Z",
      "publishedAt": "2024-03-06T22:10:21.130Z",
      "locale": "fr"
    }
  ],
  "meta": {
    "pagination": {
      "page": 1,
      "pageSize": 25,
      "pageCount": 1,
      "total": 1
    }
  }
}
```

</Response>
</ApiCall>

### 特定のロケールのドキュメントを取得する {#rest-get}

特定のロケールの特定のドキュメントを取得するには、クエリに`locale`パラメータを追加します：

| ユースケース              | 構文形式と詳細情報のリンク                                                    |
| -------------------- | ---------------------------------------------------------------------------------------------- |
| コレクションタイプで | [`GET /api/content-type-plural-name/document-id?locale=locale-code`](#get-one-collection-type) |
| シングルタイプで     | [`GET /api/content-type-singular-name?locale=locale-code`](#get-one-single-type)               |

#### コレクションタイプ {#get-one-collection-type}

特定のロケールのコレクションタイプの特定のドキュメントを取得するには、`documentId`の後に`locale`パラメータをクエリに追加します：

<ApiCall>

<Request>

`GET /api/restaurants/lr5wju2og49bf820kj9kz8c3?locale=fr`

</Request>

<Response>

```json
{
  "data": [
    {
      "id": 22,
      "documentId": "lr5wju2og49bf820kj9kz8c3",
      "Name": "Biscotte Restaurant",
      "Description": [
        {
          "type": "paragraph",
          "children": [
            {
              "type": "text",
              "text": "Bienvenue au restaurant Biscotte! Le Restaurant Biscotte propose une cuisine à base de produits frais et de qualité, souvent locaux, biologiques lorsque cela est possible, et toujours produits par des producteurs passionnés."
            }
          ]
        }
      ],
      // …
      "locale": "fr"
    },
    // …
  ],
  "meta": {
    "pagination": {
      "page": 1,
      "pageSize": 25,
      "pageCount": 1,
      "total": 3
    }
  }
}
```

</Response>

</ApiCall>

#### シングルタイプ {#get-one-single-type}

特定のロケールのシングルタイプのドキュメントを取得するには、シングルタイプ名の後に`locale`パラメータをクエリに追加します：

<ApiCall>

<Request>

`GET /api/homepage?locale=fr`

</Request>

<Response>

```json
{
  "data": {
    "id": 10,
    "documentId": "ukbpbnu8kbutpn98rsanyi50",
    "Title": "ホームページ",
    "Body": null,
    "createdAt": "2024-03-07T13:28:26.349Z",
    "updatedAt": "2024-03-07T13:28:26.349Z",
    "publishedAt": "2024-03-07T13:28:26.353Z",
    "locale": "fr"
  },
  "meta": {}
}
```

</Response>

</ApiCall>

### コレクションタイプの新しいローカライズドドキュメントを作成する {#rest-create}

ローカライズされたドキュメントをゼロから作成するには、Content APIにPOSTリクエストを送信します。デフォルトのロケール用に作成するか、別のロケール用に作成するかによって、リクエストのボディに`locale`パラメータを渡す必要があるかもしれません。

| ユースケース                      | シンタックス形式と詳細情報へのリンク                                               |
| ----------------------------- | --------------------------------------------------------------------------------------- |
| デフォルトのロケール用に作成する | [`POST /api/content-type-plural-name`](#create-default-locale) |
| 特定のロケール用に作成する  | [`POST /api/content-type-plural-name`](#create-specific-locale)<br/>+ リクエストボディにロケールを渡す               |

#### デフォルトのロケール用 {#rest-create-default-locale}

リクエストボディにロケールが渡されていない場合、ドキュメントはアプリケーションのデフォルトのロケールを使用して作成されます：

<ApiCall>
<Request> 

`POST http://localhost:1337/api/restaurants`

```json
{
  "data": {
    "Name": "Oplato",
  }
}
```

</Request>

<Response>

```json
{
  "data": {
    "id": 13,
    "documentId": "jae8klabhuucbkgfe2xxc5dj",
    "Name": "Oplato",
    "Description": null,
    "createdAt": "2024-03-06T22:19:54.646Z",
    "updatedAt": "2024-03-06T22:19:54.646Z",
    "publishedAt": "2024-03-06T22:19:54.649Z",
    "locale": "en"
  },
  "meta": {}
}
```

</Response>
</ApiCall>

#### 特定のロケール用 {#rest-create-specific-locale}

デフォルトとは異なるロケールのローカライズエントリを作成するには、POSTリクエストのボディに`locale`属性を追加します：

<ApiCall>
<Request>

`POST http://localhost:1337/api/restaurants`

```json {4}
{
  "data": {
    "Name": "She's Cake",
    "locale": "fr"
  }
}
```

</Request>

<Response>

```json
{
  "data": {
    "id": 15,
    "documentId": "ldcmn698iams5nuaehj69j5o",
    "Name": "She's Cake",
    "Description": null,
    "createdAt": "2024-03-06T22:21:18.373Z",
    "updatedAt": "2024-03-06T22:21:18.373Z",
    "publishedAt": "2024-03-06T22:21:18.378Z",
    "locale": "en"
  },
  "meta": {}
}
```

</Response>
</ApiCall>

### 既存のドキュメントの新しいロケールバージョンを作成する、または既存のロケールバージョンを更新する {#rest-put}

既存のドキュメントに対して送信される`PUT`リクエストを使用すると、以下のことができます：

- ドキュメントの別のロケールバージョンを作成する
- 既存のロケールバージョンのドキュメントを更新する

適切なURLに`PUT`リクエストを送信し、クエリURLに`locale=your-locale-code`パラメータを追加し、リクエストのボディ内の`data`オブジェクトに属性を渡します：

| ユースケース             | 構文フォーマットと詳細情報へのリンク                                               |
| -------------------- | --------------------------------------------------------------------------------------- |
| コレクションタイプで | [`PUT /api/content-type-plural-name/document-id?locale=locale-code`](#create-collection-type) |
| シングルタイプで     | [`PUT /api/content-type-singular-name?locale=locale-code`](#create-single-type)               |

:::caution
既存のローカライズされたエントリーのローカライズを作成する場合、リクエストのボディはローカライズされたフィールドのみを受け入れることができます。
:::

:::tip
Content-Typeは[`createLocalization`権限](/user-docs/users-roles-permissions/configuring-administrator-roles#collection-and-single-types)が有効になっている必要があります。そうでない場合、リクエストは`403: Forbidden`ステータスを返します。
:::

:::note
既存のローカライズされたエントリーのロケールを変更することはできません。ローカライズされたエントリーを更新する際に、リクエストのボディに`locale`属性を設定しても無視されます。
:::

#### コレクションタイプで {#rest-put-collection-type}

コレクションタイプの既存のドキュメントに新しいロケールを作成するには、`documentId`の後に`locale`パラメータをクエリに追加し、リクエストのボディにデータを渡します。

<ApiCall noSideBySide>

<Request title="例: 既存のレストランにフランス語のロケールを作成">

`PUT http://localhost:1337/api/restaurants/lr5wju2og49bf820kj9kz8c3?locale=fr`

```json
{
  data: {
    "Name": "She's Cake in French",
  }
}
```

</Request>

<Response>

```json
{
  "data": {
    "id": 19,
    "documentId": "lr5wju2og49bf820kj9kz8c3",
    "Name": "She's Cake in French",
    "Description": null,
    "createdAt": "2024-03-07T12:13:09.551Z",
    "updatedAt": "2024-03-07T12:13:09.551Z",
    "publishedAt": "2024-03-07T12:13:09.554Z",
    "locale": "fr"
  },
  "meta": {}
}
```

</Response>

</ApiCall>

#### シングルタイプで {#rest-put-single-type}

既存のシングルタイプドキュメントに新しいロケールを作成するには、シングルタイプ名の後に`locale`パラメータをクエリに追加し、リクエストのボディにデータを渡します。

<ApiCall>

<Request title="例: 既存のHomepageシングルタイプにFRロケールを作成">

`PUT http://localhost:1337/api/homepage?locale=fr`

```json
{
  "data": {
    "Title": "Page d'accueil"
  }
}
```

</Request>

<Response>

```json
{
  "data": {
    "id": 10,
    "documentId": "ukbpbnu8kbutpn98rsanyi50",
    "Title": "Page d'accueil",
    "Body": null,
    "createdAt": "2024-03-07T13:28:26.349Z",
    "updatedAt": "2024-03-07T13:28:26.349Z",
    "publishedAt": "2024-03-07T13:28:26.353Z",
    "locale": "fr"
  },
  "meta": {}
}
```

</Response>

</ApiCall>

<br/>

### ドキュメントのロケール版を削除する {#rest-delete}

ドキュメントのロケール版を削除するには、適切な`locale`パラメータを付けて`DELETE`リクエストを送信します。

`DELETE`リクエストは成功時にのみ204のHTTPステータスコードを送信し、レスポンスボディにはデータは返されません。

#### コレクションタイプでの削除 {#rest-delete-collection-type}

コレクションタイプのドキュメントの特定のロケールバージョンのみを削除するには、`documentId`の後に`locale`パラメータをクエリに追加します：

<Request>

`DELETE /api/restaurants/abcdefghijklmno456?locale=fr`

</Request>

#### シングルタイプでの削除 {#rest-delete-single-type}

シングルタイプのドキュメントの特定のロケールバージョンのみを削除するには、シングルタイプ名の後に`locale`パラメータをクエリに追加します：

<Request>

`DELETE /api/homepage?locale=fr`

</Request>

## GraphQL APIでの`locale`の使用 {#graphql}

i18n機能は、[GraphQL API](/dev-docs/api/graphql)に新しい機能を追加します：

- `locale`フィールドがGraphQLスキーマに追加されます。
- GraphQLは以下の用途で使用できます：
  - `locale`引数を使用して特定のロケールのドキュメントをクエリする
  - 特定のロケールのドキュメントを[作成](#create-a-new-localized-document)、[更新](#update-a-document-for-a-specific-locale)、[削除](#delete-a-locale-for-a-document)するためのミューテーション

### 特定のロケールのすべてのドキュメントを取得する {#graphql-fetch-all}

特定のロケールのすべてのドキュメント<DocumentDefinition/>を取得するには、クエリに`locale`引数を渡します：

<ApiCall>

<Request> 

```graphql
query {
  restaurants(locale: "fr") {
    documentId
    name
    locale
  }
}
```

</Request>

<Response>

```json
{
  "data": {
    "restaurants": [
      {
        "documentId": "a1b2c3d4e5d6f7g8h9i0jkl",
        "name": "Restaurant Biscotte",
        "locale": "fr"
      },
      {
        "documentId": "m9n8o7p6q5r4s3t2u1v0wxyz",
        "name": "Pizzeria Arrivederci",
        "locale": "fr"
      },
    ]
  }
}
```

</Response>

</ApiCall>

### 特定のロケールのドキュメントを取得する {#graphql-fetch}

特定のロケールのドキュメント<DocumentDefinition/>を取得するには、クエリに`documentId`と`locale`引数を渡します：

<ApiCall>

<Request title="Example query"> 

```graphql
query Restaurant($documentId: ID!, $locale: I18NLocaleCode) {
  restaurant(documentId: "a1b2c3d4e5d6f7g8h9i0jkl", locale: "fr") {
    documentId
    name
    description
    locale
  }
}
```

</Request>

 <Response title="Example response"> 

```json
{
  "data": {
    "restaurant": {
      "documentId": "lviw819d5htwvga8s3kovdij",
      "name": "Restaurant Biscotte",
      "description": "Bienvenue au restaurant Biscotte!",
      "locale": "fr"
    }
  }
}
```

</Response>
</ApiCall>

### 新しいローカライズされたドキュメントの作成 {#graphql-create}

`locale`フィールドを渡して、特定のロケールのローカライズされたドキュメント<DocumentDefinition/>を作成することができます（GraphQLでのミューテーションについての詳細は、[GraphQL APIドキュメンテーション](/dev-docs/api/graphql#create-a-new-document)を参照してください）。

```graphql title="例：フランス語ロケールで新しいレストランを作成"
mutation CreateRestaurant($data: RestaurantInput!, $locale: I18NLocaleCode) {
  createRestaurant(
    data: {
      name: "Brasserie Bonjour",
      description: "ここにフランス語の説明を入力"
    },
    locale: "fr"
  ) {
  documentId
  name
  description
  locale
}
```

### 特定のロケールのドキュメントを更新する {#graphl-update}

`locale` 引数をミューテーションに渡すことで、特定のロケールのドキュメント<DocumentDefinition/>を更新できます（GraphQLのミューテーションについての詳細は、[GraphQL APIドキュメンテーション](/dev-docs/api/graphql#update-an-existing-document)を参照してください）。

```graphql title="例：フランス語ロケールのレストランの説明フィールドを更新"
mutation UpdateRestaurant($documentId: ID!, $data: RestaurantInput!, $locale: I18NLocaleCode) {
  updateRestaurant(
    documentId: "a1b2c3d4e5d6f7g8h9i0jkl"
    data: {
      description: "フランス語の新しい説明"
    },
    locale: "fr"
  ) {
  documentId
  name
  description
  locale
}
```

### ドキュメントのロケールを削除する {#graphql-delete}

`locale` 引数をミューテーションに渡すことで、ドキュメント<DocumentDefinition/>の特定のローカライゼーションを削除できます：

```graphql
mutation DeleteRestaurant($documentId: ID!, $locale: I18NLocaleCode) {
  deleteRestaurant(documentId: "xzmzdo4k0z73t9i68a7yx2kk", locale: "fr") {
    documentId
  }
}
```
