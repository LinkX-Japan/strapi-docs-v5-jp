---
title: FAQ
description: Strapiを使用する際に最もよく遭遇する問題の答えと解決策を見つけてください。
tags:
- コンテンツタイプ
- 管理パネル
- デプロイメント
- 移行
- コンテンツマネージャー
- サーバーレス環境
- PaaS
- プラグイン
- ダイナミックゾーン
- UUID
- デフォルトのIDタイプ
- デフォルトのID名
- SSL
- TypeScript

---

import NotV5 from '/docs/snippets/_not-updated-to-v5.md'

# よくある質問

<NotV5 />

以下は、Strapiを使用する際に最もよく遭遇する問題の答えと解決策です。

## なぜ本番環境/ステージング環境でコンテンツタイプを作成または更新できないのですか？

Strapiはモデルの設定ファイル（モデルスキーマを定義するもの）を`./src/api/restaurant/content-types/restaurant/schema.json`のようなファイルに保存します。Node.jsの動作方法により、変更が有効になるためにはNodeがサーバーを再起動する必要があります。これはあなたの本番サービスのダウンタイムを引き起こす可能性があり、同様にこれらの変更は何らかのソースコントロールで追跡するべきです。

一般的にあなたの開発の"フロー"は以下のパスに従います：

- 開発 - ホストマシン上でローカルにStrapiアプリケーションを開発し、ソースコントロールに変更をプッシュします
- ステージング - ソースコントロールから"本番環境に近い"環境に変更をデプロイします
- 本番環境 - 他に必要な変更がなければ、本番環境にデプロイします
- 必要に応じて繰り返します。進行中に適切にバージョン管理し、アプリケーションをテストすることを推奨します

現時点および将来において、本番環境でのモデルの作成や更新を許可する計画はありませんし、モデル設定をデータベースに移行する計画も現在はありません。これに対する既知の、または推奨される回避策はありません。

## Strapiはコンテンツのデプロイや移行を処理しますか？

Strapiは[Data Transfer](/dev-docs/data-management/transfer)という機能を提供しており、これにより一つのStrapiインスタンスから別のインスタンスへのコンテンツのエクスポートとインポート、またはファイルアーカイブからのエクスポートとインポートが可能になります。これは一つの環境から別の環境へのコンテンツの移行に役立ちます。

## ユーザーが管理パネルにログインできません

Strapi 3.0ベータ版のリリースにより、エンドユーザー（RESTおよびGraphQLユーザー）と管理者（管理パネルのユーザー）が分割され、通常のユーザーは管理パネルにアクセスできないようになりました。この変更がなぜ行われたのかについて詳しく読みたい場合は、Strapiの[ブログ投稿](https://strapi.io/blog/why-we-split-the-management-of-the-admin-users-and-end-users)をご覧ください。

StrapiはAdmin & Permissions（RBAC - Role-Based Access Control）をリリースしました。これにより、管理パネル内でユーザーがアクセスできる範囲をある程度制御できるようになり、一部のフィールドレベルの権限も含まれています。また、コンテンツタイプ、シングルタイプ、プラグイン、設定などに対する特定の権限をロールに付与することもできます。

## なぜPaaS型サービスでアプリケーションのデータベースとアップロードがリセットされるのですか？

あなたが`--quickstart`を使ってStrapiプロジェクトを作成した場合、デフォルトではSQLiteデータベースが使用されます。PaaSシステム（Heroku、DigitalOcean Apps、Google App Engineなど）のファイルシステムは通常、[ephemeral](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)（一時的）または読み取り専用で、dyno（コンテナ）がリセットされるたびにすべてのファイルシステムの変更が失われます。そして、SQLiteとローカルのアップロードは両方ともファイルシステムに保存されるため、最後のdynoリセット以降にこれらに対して行われた変更はすべて削除されます。通常、dynoは少なくとも1日に1回リセットされ、ほとんどの場合は1日に複数回または新しいコードがこれらのサービスにプッシュされたときにリセットされます。

HerokuのPostgreSQLのようなデータベースアドオンの使用をお勧めします。ファイルのアップロードには、CloudinaryやAWS S3のような第三者プロバイダを使用する必要があります。

## 無料のStrapi Cloud試用版を有料プランにアップグレードするにはどうすればいいですか？

Strapi Cloudは、最大5つのプロジェクトに対する無料の14日間の試用期間を提供しています。いつでも[有料プラン](https://strapi.io/pricing-cloud)にアップグレードする準備ができたら、Strapi Cloudプロジェクトの設定の_Plans_セクションを使用してください（詳細は[Cloud documentation](/cloud/projects/settings#upgrading-to-another-plan)を参照してください）。

## Strapiはサーバーレス環境で実行できますか？

Strapiはアプリケーションの構造のため、サーバーレス環境にはあまり適していません。Strapiが起動する際には、数秒かかるいくつかのアクションが発生します。サーバーレスのデプロイメントでは、アプリケーションが非常に迅速にコールドブートすることが通常必要です。Strapiは常時稼働するサービスとして設計されており、当面の間、コールドブート時間を短縮する計画はありません。したがって、Strapiをサーバーレス環境で実行すると、すべてのリクエストがミリ秒単位ではなく秒単位で応答するため、あまり良い経験にはなりません。コールドブートとウォームブートの選択は、多くのソフトウェア開発者が非常に早い段階から行う必要がある建築上の決定ですので、Strapiを使用する際にはこれを考慮してください。

## Content Managerのレイアウト設定をモデル設定に保存できますか？

現在、Strapiはこれをサポートしていませんが、`config:dump`と`config:restore`コマンドが追加されており、これにより異なるデプロイメントや環境間でこれらの設定を移行する際に作業が容易になります。

これらの設定をモデル設定に保存する機能を提供しない理由はいくつかあります：

- コンテンツの国際化と管理インターフェースでの翻訳の場合に競合が発生します。
- レイアウトはロールと権限によって異なる可能性があります。
- モデルは作成されたコンテンツに関係なく同じですが、投稿インターフェースは異なる可能性があります。例えば、投稿者専用のモバイルアプリケーションを作成するアイデアがあります。ラベルとレイアウト設定はデバイスやインターフェースによって異なる可能性があります。

これら全ての理由、およびその他の理由から、モデル設定ファイルに設定を保存すると、ユーザーが混乱する可能性があると考えています。最終的な解決策は、環境間でのマイグレーションとデプロイを容易にすることです。

## プラグインをカスタマイズするにはどうすればいいですか？

Strapiは、プラグインが`node_modules`フォルダに保存されているため、[extension](/dev-docs/plugins-extension)というシステムを使用しています。このため、Strapiはプログラム的なフックを利用してプラグインの一部を上書きすることで、拡張機能が動作します。

## 自分のサードパーティ認証プロバイダーを追加できますか？

はい、次の[ドキュメンテーション](/dev-docs/plugins/users-permissions#providers)に従うか、または[users-permissions](https://github.com/strapi/strapi/tree/master/packages/plugins/users-permissions)のコードを見て、プロバイダーを全員に含めるためのプルリクエストを提出することができます。最終的にStrapiは、現在のgrant/purestプロバイダーから、アップロードプロバイダーと同様の分割されたシステムに移行する予定です。

ただし、このマイグレーションについて現在のところETAはありません。

## StrapiはデフォルトのIDタイプや名前を変更することを許可していますか？

いいえ、現在はデフォルトのid名を変更したり、データタイプ（PostgreSQLのUUIDなど）を切り替えることを許可する機能はありません。このサポートについては将来的に検討されています。

## ダイナミックゾーンや多態性関係でフィルタリングやディープフィルタリングは可能ですか？

現時点では、ダイナミックゾーンや多態性関係でのフィルタリングを許可する予定はありません。これは、そのような操作から生じる様々な複雑さとパフォーマンス問題が原因です。

## StrapiでSSLを設定するにはどうすればいいですか？

StrapiはネイティブにSSLソリューションを実装していません。これは、Node.jsアプリケーションを直接公開ウェブに提供することは非常に不安全であるためです。

Linuxベースのオペレーティングシステムでは、1024以下の任意のポートにバインドするためにはroot権限が必要で、典型的なSSLはポート443なので、アプリケーションをrootとして実行する必要があります。

同様に、StrapiはNode.jsベースなので、SSL証明書の変更（例えば、それが有効期限切れになった場合）が反映されるためには、アプリケーションを再起動する必要があります。

これら2つの問題から、[Nginx](https://forum.strapi.io/t/nginx-proxing-with-strapi/)、[Caddy](https://forum.strapi.io/t/caddy-proxying-with-strapi/40616)、[HAProxy](https://forum.strapi.io/t/haproxy-proxying-with-strapi/)、Apache、Traefikなどのプロキシアプリケーションを使用して、Strapiへのエッジルーティングを処理することを推奨します。環境の[server.json](/dev-docs/configurations/server)には、上流のプロキシを処理する設定があります。プロキシブロックでは全ての設定を記入する必要があり、認証プロバイダーやアップロードプラグインなどのバックエンドプラグインを変更して、標準の`localhost:1337`をプロキシURLに置き換えます。

## StrapiプロジェクトでTypeScriptを使用できますか？

TypeScriptは、v4.2.0-beta.1からStrapiプロジェクトでサポートされています。TypeScriptのコード例は、コア開発者ドキュメンテーション全体で利用可能で、[専用のTypeScriptサポートページ](/dev-docs/typescript)もあります。

## ビルドエラー`Error: Cannot find module @strapi/XXX`の修正方法

:::caution
以下の修正を試す前に、プロジェクトでパッケージマネージャのインストールコマンドが実行されていることを確認してください。
:::

現在のバージョンのStrapiでは、依存関係の巻き上げが必要です。

デフォルトでは、ほとんどのパッケージマネージャが巻き上げを有効にしていますが、期待通りに機能していない場合は、パッケージマネージャの設定を通じて強制的に巻き上げを試みることができます。

- npmまたはpnpmを使用している場合：プロジェクトの`.npmrc`ファイルに`hoist=true`を追加します。これについての詳細は、[公式pnpmドキュメンテーション](https://pnpm.io/npmrc#hoist)をご覧ください。
- Yarnを使用している場合：`.yarnrc`ファイルで`nmHoistingLimits`を設定します。詳細は、[Yarn公式ドキュメンテーション](https://yarnpkg.com/configuration/yarnrc#nmHoistingLimits)をご覧ください。

## Xの機能はまだ利用可能ですか？

現在作業中の機能リクエストやまだ開始されていないもの、新しい機能リクエストを追加するために、[公開ロードマップ](https://feedback.strapi.io/)をご覧いただけます。
